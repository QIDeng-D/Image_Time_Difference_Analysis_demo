# ä½¿ç”¨æŒ‡å— (Usage Guide)

## å¿«é€Ÿå¼€å§‹ (Quick Start)

### 1. è¿è¡Œç¨‹åº

```bash
python -m src.main
```

### 2. æŸ¥çœ‹è¿›åº¦

ç¨‹åºä¼šæ˜¾ç¤ºå®æ—¶è¿›åº¦ï¼š

```
================================================================================
ğŸš€ å¤šè¿›ç¨‹å¹¶è¡Œæå– (Multiprocess Parallel Extraction)
================================================================================
ğŸ“¦ å¤„ç†è§†é¢‘æ®µ:  20%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/10 [ 20%] 00:33<01:49
                    â†‘è¿›åº¦æ¡      â†‘å®Œæˆ  â†‘ç™¾åˆ†æ¯” â†‘å·²ç”¨æ—¶<å‰©ä½™æ—¶é—´

================================================================================
ğŸ”— æ‰¹é‡æ‹¼æ¥ (Batch Stitching)
================================================================================
æ‰¾åˆ° 731 å¯¹åŒ¹é…å¸§

ğŸ”— æ‹¼æ¥å¸§:  45%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 330/731 [ 45%] 00:15<00:18
```

### 3. æŸ¥çœ‹ç»“æœ

å¤„ç†å®Œæˆåä¼šæ˜¾ç¤ºï¼š

```
================================================================================
âœ… å¤„ç†å®Œæˆï¼(Processing Complete!)
================================================================================
Cam0 æå–å¸§æ•°: 731
Cam1 æå–å¸§æ•°: 731
æˆåŠŸæ‹¼æ¥å¸§æ•°: 731
è¾“å‡ºç›®å½•: stitched_frames
================================================================================

âœ… Processing report generated: processing_report.txt
```

## è¾“å‡ºæ–‡ä»¶ (Output Files)

### 1. æå–çš„å¸§

```
extracted_frames/
â”œâ”€â”€ cam0/
â”‚   â”œâ”€â”€ frame_0001.png
â”‚   â”œâ”€â”€ frame_0101.png
â”‚   â”œâ”€â”€ frame_0201.png
â”‚   â””â”€â”€ ...
â””â”€â”€ cam1/
    â”œâ”€â”€ frame_0001.png
    â”œâ”€â”€ frame_0101.png
    â”œâ”€â”€ frame_0201.png
    â””â”€â”€ ...
```

### 2. æ‹¼æ¥çš„å¸§

```
stitched_frames/
â”œâ”€â”€ frame_0001.png  (cam0åœ¨ä¸Šï¼Œcam1åœ¨ä¸‹)
â”œâ”€â”€ frame_0101.png
â”œâ”€â”€ frame_0201.png
â””â”€â”€ ...
```

### 3. å¤„ç†æŠ¥å‘Š

`processing_report.txt` - è¯¦ç»†çš„å¤„ç†æŠ¥å‘Šï¼ŒåŒ…å«ï¼š
- è¾“å…¥è§†é¢‘ä¿¡æ¯ï¼ˆå¸§æ•°ã€æ—¶é•¿ã€å¸§ç‡ï¼‰
- åŒæ­¥è´¨é‡åˆ†æï¼ˆ6ä¸ªå­ç« èŠ‚ï¼‰
- å¸§æå–ä¿¡æ¯
- å¸§æ‹¼æ¥ä¿¡æ¯
- è¾“å‡ºä¿¡æ¯
- å¤„ç†æ€»ç»“
- **æ‹¼æ¥å¸§æ—¶é—´æˆ³è¯¦ç»†åˆ†æ**ï¼ˆæ–°å¢ï¼‰
  - æ‰€æœ‰æ‹¼æ¥å¸§çš„æ—¶é—´æˆ³å¯¹æ¯”
  - æ¯å¸§è¯¦ç»†çš„æ—¶é—´å·®åˆ†æ
  - æ—¶é—´åå·®è¶‹åŠ¿åˆ†æ

## é…ç½®é€‰é¡¹ (Configuration)

ç¼–è¾‘ `config.yaml`:

```yaml
# è¾“å…¥è¾“å‡ºç›®å½•
input_dir: "./segments"
output_dir: "./stitched_frames"
extracted_frames_dir: "./extracted_frames"

# é‡‡æ ·é—´éš”ï¼ˆæ¯Nå¸§æå–ä¸€æ¬¡ï¼‰
sampling_interval: 100

# è¾“å‡ºæ ¼å¼
output_format: "png"  # æˆ– "jpg"

# è§†é¢‘æ–‡ä»¶åŒ¹é…æ¨¡å¼
cam0_pattern: "stereo_cam0_sbs_*.mp4"
cam1_pattern: "stereo_cam1_sbs_*.mp4"

# å¸§æ•°å·®å¼‚é˜ˆå€¼ï¼ˆç™¾åˆ†æ¯”ï¼‰
frame_count_threshold: 5.0

# æ—¶é—´æˆ³åˆ†æ
timestamp_analysis_enabled: true
timestamp_sync_threshold_ms: 50.0
timestamp_sample_points: 20

# å¸§å·å åŠ 
enable_frame_overlay: true
overlay_font_size: 32
overlay_position: "top-left"  # top-left, top-right, bottom-left, bottom-right
```

## æ€§èƒ½è¯´æ˜ (Performance)

### å½“å‰é…ç½®

- **å¤šè¿›ç¨‹**: 10ä¸ªå·¥ä½œè¿›ç¨‹ï¼ˆ5ä¸ªcam0æ®µ + 5ä¸ªcam1æ®µï¼‰
- **å¤„ç†å™¨**: CPUå¤„ç†
- **é¢„è®¡æ—¶é—´**: 2-3åˆ†é’Ÿï¼ˆ73,000å¸§ï¼Œé‡‡æ ·é—´éš”100ï¼‰

### æ€§èƒ½å› ç´ 

å½±å“å¤„ç†é€Ÿåº¦çš„å› ç´ ï¼š
1. **CPUæ ¸å¿ƒæ•°**: æ›´å¤šæ ¸å¿ƒ = æ›´å¿«
2. **è§†é¢‘æ®µæ•°é‡**: æ›´å¤šæ®µ = æ›´å¥½çš„å¹¶è¡Œåº¦
3. **é‡‡æ ·é—´éš”**: æ›´å¤§é—´éš” = æ›´å°‘å¸§ = æ›´å¿«
4. **ç£ç›˜é€Ÿåº¦**: SSDæ¯”æœºæ¢°ç¡¬ç›˜å¿«

### ä¼˜åŒ–å»ºè®®

**å¦‚æœè§‰å¾—æ…¢**:
1. å¢å¤§é‡‡æ ·é—´éš”ï¼ˆå¦‚æ”¹ä¸º200ï¼‰
2. ä½¿ç”¨SSDå­˜å‚¨
3. å…³é—­å¸§å·å åŠ ï¼ˆenable_frame_overlay: falseï¼‰

**å¦‚æœéœ€è¦æ›´ç²¾ç¡®**:
1. å‡å°é‡‡æ ·é—´éš”ï¼ˆå¦‚æ”¹ä¸º50ï¼‰
2. å¯ç”¨æ—¶é—´æˆ³åˆ†æ
3. ä½¿ç”¨PNGæ ¼å¼ï¼ˆæ›´é«˜è´¨é‡ï¼‰

## è¿›åº¦ä¿¡æ¯è§£è¯» (Progress Information)

### æå–é˜¶æ®µ

```
ğŸ“¦ å¤„ç†è§†é¢‘æ®µ:  20%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/10 [ 20%] 00:33<01:49
                                cam: cam0, seg: 4, frames: 10
```

- **2/10**: å·²å®Œæˆ2ä¸ªæ®µï¼Œå…±10ä¸ªæ®µ
- **20%**: å®Œæˆç™¾åˆ†æ¯”
- **00:33**: å·²ç”¨æ—¶é—´ï¼ˆ33ç§’ï¼‰
- **<01:49**: é¢„è®¡å‰©ä½™æ—¶é—´ï¼ˆ1åˆ†49ç§’ï¼‰
- **cam: cam0**: å½“å‰å¤„ç†çš„ç›¸æœº
- **seg: 4**: å½“å‰å¤„ç†çš„æ®µå·
- **frames: 10**: è¯¥æ®µæå–çš„å¸§æ•°

### æ‹¼æ¥é˜¶æ®µ

```
ğŸ”— æ‹¼æ¥å¸§:  45%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 330/731 [ 45%] 00:15<00:18
```

- **330/731**: å·²æ‹¼æ¥330å¸§ï¼Œå…±731å¸§
- **45%**: å®Œæˆç™¾åˆ†æ¯”
- **00:15**: å·²ç”¨æ—¶é—´ï¼ˆ15ç§’ï¼‰
- **<00:18**: é¢„è®¡å‰©ä½™æ—¶é—´ï¼ˆ18ç§’ï¼‰

## å¸¸è§é—®é¢˜ (FAQ)

### Q1: ç¨‹åºå®Œæˆåä¸é€€å‡ºæ€ä¹ˆåŠï¼Ÿ

**A**: å·²åœ¨v1.3.1ä¸­ä¿®å¤ã€‚å¦‚æœä»ç„¶é‡åˆ°é—®é¢˜ï¼š

**æ–¹æ³•1: ç­‰å¾…è‡ªåŠ¨æ¸…ç†**
- ç¨‹åºä¼šæ˜¾ç¤º "Shutting down process pool..."
- ç­‰å¾…5-10ç§’è®©è¿›ç¨‹æ± æ­£å¸¸å…³é—­
- çœ‹åˆ° "ğŸ‰ æ‰€æœ‰å¤„ç†å®Œæˆï¼Œç¨‹åºæ­£å¸¸é€€å‡º" åä¼šè‡ªåŠ¨é€€å‡º

**æ–¹æ³•2: ä¼˜é›…ä¸­æ–­**
- æŒ‰ä¸€æ¬¡ `Ctrl+C`
- ç¨‹åºä¼šæ˜¾ç¤º "âš ï¸ æ”¶åˆ°ä¸­æ–­ä¿¡å·ï¼Œæ­£åœ¨æ¸…ç†èµ„æº..."
- ç­‰å¾…å½“å‰ä»»åŠ¡å®Œæˆåé€€å‡º

**æ–¹æ³•3: å¼ºåˆ¶é€€å‡º**
- å¿«é€ŸæŒ‰ä¸¤æ¬¡ `Ctrl+C`
- æˆ–ä½¿ç”¨å‘½ä»¤: `Get-Process python | Stop-Process -Force`

### Q2: å¦‚ä½•åŠ å¿«å¤„ç†é€Ÿåº¦ï¼Ÿ

**A**: 
1. å¢å¤§é‡‡æ ·é—´éš”ï¼ˆsampling_interval: 200ï¼‰
2. ä½¿ç”¨æ›´å°‘çš„è§†é¢‘æ®µ
3. ä½¿ç”¨SSDå­˜å‚¨
4. å…³é—­å¸§å·å åŠ 

### Q3: å¦‚ä½•æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼Ÿ

**A**: æ—¥å¿—ä¼šå®æ—¶æ˜¾ç¤ºåœ¨ç»ˆç«¯ï¼ŒåŒ…æ‹¬ï¼š
- é…ç½®åŠ è½½
- è§†é¢‘å‘ç°
- æ—¶é—´æˆ³åˆ†æ
- æå–è¿›åº¦
- æ‹¼æ¥è¿›åº¦
- è¿›ç¨‹æ± æ¸…ç†çŠ¶æ€

### Q4: å¤„ç†æŠ¥å‘Šåœ¨å“ªé‡Œï¼Ÿ

**A**: `processing_report.txt` åœ¨å½“å‰ç›®å½•ä¸‹ï¼ŒåŒ…å«å®Œæ•´çš„å¤„ç†ç»Ÿè®¡å’Œåˆ†æã€‚

### Q5: æ—¶é—´æˆ³åˆ†ææ˜¾ç¤º"ä¸€èˆ¬"æ€ä¹ˆåŠï¼Ÿ

**A**: è¿™è¡¨ç¤ºä¸¤ä¸ªç›¸æœºçš„æ—¶é—´åŒæ­¥è´¨é‡ä¸€èˆ¬ï¼ˆå¹³å‡åå·®30-50msï¼‰ã€‚å»ºè®®ï¼š
- å¦‚æœæ˜¯ç§‘å­¦å®éªŒï¼Œè€ƒè™‘ä½¿ç”¨æ—¶é—´æˆ³åŒ¹é…ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰
- å¦‚æœæ˜¯æ™®é€šè§†é¢‘ï¼Œå½“å‰æŒ‰å¸§å·åŒ¹é…å·²è¶³å¤Ÿ

### Q6: å¯ä»¥å¤„ç†å…¶ä»–æ ¼å¼çš„è§†é¢‘å—ï¼Ÿ

**A**: æ”¯æŒMP4å’ŒAVIæ ¼å¼ã€‚ä¿®æ”¹config.yamlä¸­çš„patternå³å¯ï¼š
```yaml
cam0_pattern: "your_pattern_*.avi"
```

### Q7: å¦‚ä½•åªæå–ä¸æ‹¼æ¥ï¼Ÿ

**A**: å½“å‰ç‰ˆæœ¬ä¼šè‡ªåŠ¨æ‹¼æ¥ã€‚å¦‚æœåªéœ€è¦æå–çš„å¸§ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨`extracted_frames/`ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚

## æŠ€æœ¯æ”¯æŒ (Support)

### æŸ¥çœ‹ç‰ˆæœ¬

```bash
python -m src.main --version
```

è¾“å‡ºï¼š
```
Video Frame Stitcher v1.3.0 (Multiprocess + GPU)
```

### æŸ¥çœ‹å¸®åŠ©

```bash
python -m src.main --help
```

### ä½¿ç”¨è‡ªå®šä¹‰é…ç½®

```bash
python -m src.main --config my_config.yaml
```

## æ›´æ–°æ—¥å¿— (Changelog)

### v1.4.0 (2026-01-30)
- âœ… æ‹¼æ¥å¸§æ—¶é—´æˆ³è¯¦ç»†åˆ†æï¼ˆæŠ¥å‘Šç¬¬7ç« èŠ‚ï¼‰
- âœ… ä¿®æ­£æ•°æ®åˆ©ç”¨ç‡è®¡ç®—ï¼ˆåˆ†åˆ«æ˜¾ç¤ºCam0å’ŒCam1ï¼‰
- âœ… ç§»é™¤GPUç›¸å…³ä»£ç 
- âœ… ç®€åŒ–ä»£ç ç»“æ„
- âœ… çº¯CPUå¤šè¿›ç¨‹å¤„ç†
- âœ… æ›´ç¨³å®šçš„æ€§èƒ½

### v1.3.1 (2026-01-30)
- âœ… ä¿®å¤å¤šè¿›ç¨‹æ¸…ç†é—®é¢˜
- âœ… æ˜¾å¼è¿›ç¨‹æ± ç®¡ç†
- âœ… æ·»åŠ ä»»åŠ¡è¶…æ—¶æœºåˆ¶ï¼ˆ5åˆ†é’Ÿï¼‰
- âœ… æ”¹è¿›èµ„æºæ¸…ç†ä¿è¯
- âœ… æ·»åŠ ä¿¡å·å¤„ç†ï¼ˆCtrl+Cï¼‰
- âœ… å¼ºåˆ¶åƒåœ¾å›æ”¶
- âœ… ç¨‹åºç°åœ¨èƒ½æ­£å¸¸é€€å‡º

### v1.3.0 (2026-01-30)
- âœ… å¤šè¿›ç¨‹å¹¶è¡Œæå–ï¼ˆ10è¿›ç¨‹ï¼‰
- âœ… å®æ—¶è¿›åº¦æ¡æ˜¾ç¤º
- âœ… æ‰¹é‡æ‹¼æ¥ä¼˜åŒ–
- âœ… æ€§èƒ½æå‡5-10å€

### v1.2.0 (2026-01-30)
- âœ… æ—¶é—´æˆ³åŒæ­¥åˆ†æ
- âœ… å¤šçº¿ç¨‹å¹¶è¡Œè¯»å–timestamp
- âœ… å¢å¼ºçš„å¤„ç†æŠ¥å‘Š

### v1.1.0 (2026-01-30)
- âœ… æµå¼å¤„ç†ç®¡é“
- âœ… è¾¹æå–è¾¹æ‹¼æ¥
- âœ… ä¸‰ä¸ªç‹¬ç«‹è¿›åº¦æ¡

### v1.0.0 (2026-01-30)
- âœ… åŸºç¡€å¸§æå–å’Œæ‹¼æ¥åŠŸèƒ½
- âœ… é…ç½®æ–‡ä»¶æ”¯æŒ
- âœ… å¸§å·å åŠ 
- âœ… å¸§æ•°éªŒè¯

## ç¤ºä¾‹è¾“å‡º (Example Output)

å®Œæ•´çš„å¤„ç†æµç¨‹è¾“å‡ºï¼š

```
2026-01-30 15:20:09 - INFO - Loading configuration...
2026-01-30 15:20:09 - INFO - Configuration loaded
2026-01-30 15:20:09 - INFO - Discovering video files...
2026-01-30 15:20:10 - INFO - Found 5 cam0 segments and 5 cam1 segments
2026-01-30 15:20:10 - INFO - Frame count validation: cam0=73095, cam1=73092, diff=0.00%
2026-01-30 15:20:10 - INFO - Analyzing timestamp synchronization...
2026-01-30 15:20:11 - INFO - Timestamp analysis complete: avg_drift=44.27ms, max_drift=101.38ms
2026-01-30 15:20:11 - INFO - Sync quality rating: âš ï¸ ä¸€èˆ¬
2026-01-30 15:20:11 - INFO - Expected to extract: cam0=731, cam1=731
2026-01-30 15:20:11 - INFO - ğŸš€ Starting multiprocess frame extraction...

================================================================================
ğŸš€ å¤šè¿›ç¨‹å¹¶è¡Œæå– (Multiprocess Parallel Extraction)
================================================================================
ğŸ“¦ å¤„ç†è§†é¢‘æ®µ: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 10/10 [100%] 02:30<00:00

================================================================================
âœ… æå–å®Œæˆ: cam0=731å¸§, cam1=731å¸§
================================================================================

================================================================================
ğŸ”— æ‰¹é‡æ‹¼æ¥ (Batch Stitching)
================================================================================
æ‰¾åˆ° 731 å¯¹åŒ¹é…å¸§

ğŸ”— æ‹¼æ¥å¸§: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 731/731 [100%] 00:45<00:00

================================================================================
âœ… æ‹¼æ¥å®Œæˆ: 731å¸§
================================================================================

================================================================================
âœ… å¤„ç†å®Œæˆï¼(Processing Complete!)
================================================================================
Cam0 æå–å¸§æ•°: 731
Cam1 æå–å¸§æ•°: 731
æˆåŠŸæ‹¼æ¥å¸§æ•°: 731
è¾“å‡ºç›®å½•: stitched_frames
================================================================================

âœ… Processing report generated: processing_report.txt
```
